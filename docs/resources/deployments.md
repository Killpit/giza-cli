# Deployments

Deployments in our platform provide a mechanism for creating services that accept predictions via a designated endpoint. These services, based on existing platform versions, leverage Cairo and EZKL under the hood to ensure provable inferences. Using the CLI, users can effortlessly deploy and retrieve information about these machine learning services.

## Deploying a model

{% hint style="info" %}
**Note:** This is explained extensively in the deploy documentation ([Orion Cairo](../frameworks/cairo/deploy.md) and [EZKL](../frameworks/ezkl/deploy.md)).
{% endhint %}

To deploy a model, you must first have a version of that model. If you have not yet created a version, please refer to the [versions](versions.md) documentation.

To create a new service, users can employ the `deploy` command. This command facilitates the deployment of a machine learning service ready to accept predictions at a specific endpoint, providing a straightforward method for deploying and using machine learning capabilities.

{% code overflow="wrap" %}
```console
> giza deployments deploy --model-id 1 --version-id 1 model.sierra
‚ñ∞‚ñ∞‚ñ∞‚ñ∞‚ñ∞‚ñ±‚ñ± Creating deployment!
[giza][2024-02-07 12:31:02.498] Deployment is successful ‚úÖ
[giza][2024-02-07 12:31:02.501] Deployment created with id -> 1 ‚úÖ
[giza][2024-02-07 12:31:02.502] Deployment created with endpoint URL: https://deployment-gizabrain-38-1-53427f44-dagsgas-ew.a.run.app üéâ
```
{% endcode %}

Now a version will be deployed and ready to use as an API. For specific documentation on the deployment of different frameworks, you can go here:

* [Orion Cairo deploy](../frameworks/cairo/deploy.md)
* [EZKL deploy](../frameworks/ezkl/deploy.md)

## Listing deployments

The list command is designed to retrieve information about all existing deployments. It provides an overview of the deployed machine learning services, allowing users to monitor and manage multiple deployments efficiently.

```console
giza deployments list --model-id 1 --version-id 1
[giza][2024-01-17 17:19:00.631] Listing deployments ‚úÖ 
[
  {
    "id": 1,
    "status": "COMPLETED",
    "uri": "https://deployment-gizabrain-38-1-53427f44-dagsgas-ew.a.run.app",
    "size": "S",
    "service_name": "deployment-gizabrain-38-1-53427f44",
    "model_id": 1,
    "version_id": 1
  }
]
```

Executing this command will display a list of all current deployments, including relevant details such as service names, version numbers, and deployment status.

## Retrieving a deployment

For retrieving detailed information about a specific deployment, users can utilize the get command. This command allows users to query and view specific details of a single deployment, providing insights into the configuration, status, and other pertinent information.

```console
> giza deployments get --model-id 1 --version-id 1 --deployment-id 1
{
  "id": 1,
  "status": "COMPLETED",
  "uri": "https://deployment-gizabrain-38-1-53427f44-dagsgas-ew.a.run.app",
  "size": "S",
  "service_name": "deployment-gizabrain-38-1-53427f44",
  "model_id": 38,
  "version_id": 1
}
```

## Listing proofs

You can list all of the proofs generated by a deployment using the `list-proofs` command.

```sh
‚ùØ giza deployments list-proofs --model-id 1--version-id 1 --deployment-id 1
[giza][2024-02-20 15:55:08.032] Getting proofs from deployment 1 ‚úÖ
[
  {
    "id": 1
    "job_id": 1,
    "metrics": {
      "proving_time": 17.00862145423889
    },
    "created_date": "2024-02-19T15:34:52.363483"
  },
  {
    "id": 2,
    "job_id": 2,
    "metrics": {
      "proving_time": 17.20691967010498
    },
    "created_date": "2024-02-19T17:21:03.310809"
]
```

## Download a Proof

To download a proof the `download-proof` command its available to help with this. The proofs can be retrieved either by `proof_id` or `request_id` which is returned in the prediction.

<pre class="language-sh"><code class="lang-sh"><strong>‚ùØ giza deployments download-proof --model-id 1 --version-id 1 --deployment-id 1 --proof-id "d0564505755944b8bef9292d980f3e27"
</strong>[giza][2024-02-20 15:40:48.560] Getting proof from deployment 1 ‚úÖ
[giza][2024-02-20 15:40:49.288] Proof downloaded to zk.proof ‚úÖ
</code></pre>

The `proof id` used is the `request_id` returned in the response, but also the integer proof-id can be used as well:

<pre><code><strong>‚ùØ giza deployments download-proof --model-id 1 --version-id 1 --deployment-id 1 --proof-id 1
</strong>[giza][2024-02-20 15:40:48.560] Getting proof from deployment 1 ‚úÖ
[giza][2024-02-20 15:40:49.288] Proof downloaded to zk.proof ‚úÖ
</code></pre>
